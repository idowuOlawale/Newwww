<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>USDC Drip Bot – 0.00001 every minute</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
  <style>
    body { background: linear-gradient(135deg, #0f172a, #1e293b); color: #e2e8f0; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 20px; min-height: 100vh; display: flex; align-items: center; justify-content: center; }
    .card { max-width: 520px; width: 100%; background: #1e293b; padding: 40px; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.6); text-align: center; }
    h1 { color: #60a5fa; margin-bottom: 10px; font-size: 32px; }
    p { font-size: 18px; line-height: 1.6; margin: 15px 0; }
    button { background: #10b981; color: white; border: none; padding: 16px 32px; font-size: 18px; border-radius: 12px; cursor: pointer; font-weight: bold; margin: 10px; transition: 0.3s; }
    button:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(16,185,129,0.4); }
    .stop { background: #ef4444; }
    .addr { background: #334155; padding: 14px; border-radius: 10px; margin: 20px 0; word-break: break-all; font-family: monospace; font-size: 15px; }
    .status { margin: 20px 0; padding: 15px; background: #334155; border-radius: 10px; font-size: 17px; }
    .log { margin: 20px 0; padding: 15px; background: #0f172a; border-radius: 10px; max-height: 300px; overflow-y: auto; text-align: left; font-family: monospace; font-size: 14px; display: none; }
  </style>
</head>
<body>
  <div class="card">
    <h1>USDC Drip Bot</h1>
    <p>Send <strong>0.00001 USDC every 60 seconds</strong> to:</p>
    <div class="addr">0xcde71a94923dd426910ce9beb8e1d1c3eb11cd2f</div>

    <button id="connectBtn">Connect Wallet (Base)</button>
    <button id="approveBtn" style="display:none;">Approve Unlimited USDC (One Time)</button>
    <button id="startBtn" style="display:none;">Start Drip</button>
    <button id="stopBtn" class="stop" style="display:none;">Stop Drip</button>

    <div class="status" id="status">Not connected</div>
    <div class="log" id="log"></div>
  </div>

  <script>
    const TARGET = "0xcde71a94923dd426910ce9beb8e1d1c3eb11cd2f";
    const USDC = "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913";
    const AMOUNT = "10000"; // 0.00001 USDC (6 decimals)
    const INTERVAL = 60000; // 60 seconds

    let web3, account, intervalId;
    const status = document.getElementById('status');
    const logDiv = document.getElementById('log');

    function addLog(msg) {
      const time = new Date().toLocaleTimeString();
      logDiv.innerHTML += `<div>[${time}] ${msg}</div>`;
      logDiv.scrollTop = logDiv.scrollHeight;
      logDiv.style.display = 'block';
    }

    document.getElementById('connectBtn').onclick = async () => {
      if (!window.ethereum) return alert("Please install MetaMask");

      web3 = new Web3(window.ethereum);
      await ethereum.request({ method: 'eth_requestAccounts' });
      const chainId = await web3.eth.getChainId();

      if (chainId !== 8453) {
        try {
          await ethereum.request({
            method: "wallet_switchEthereumChain",
            params: [{ chainId: "0x2105" }]
          });
        } catch (err) {
          return alert("Please switch to Base network in MetaMask");
        }
      }

      [account] = await web3.eth.getAccounts();
      status.textContent = `Connected: ${account.slice(0, 6)}...${account.slice(-4)}`;
      document.getElementById('connectBtn').style.display = 'none';
      document.getElementById('approveBtn').style.display = 'block';
      addLog("Wallet connected on Base");
    };

    document.getElementById('approveBtn').onclick = async () => {
      const usdcAbi = [{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}];
      const usdc = new web3.eth.Contract(usdcAbi, USDC);

      try {
        addLog("Requesting unlimited USDC approval (one-time transaction)...");
        await usdc.methods.approve(
          account, // spender = your own wallet (you will be sending from it)
          "115792089237316195423570985008687907853269984665640564039457584007913129639935"
        ).send({ from: account });
        addLog("Unlimited approval granted – no more approvals ever needed");
        document.getElementById('approveBtn').style.display = 'none';
        document.getElementById('startBtn').style.display = 'block';
      } catch (err) {
        addLog("Approval failed: " + (err.message || err));
      }
    };

    document.getElementById('startBtn').onclick = () => {
      document.getElementById('startBtn').style.display = 'none';
      document.getElementById('stopBtn').style.display = 'block';
      status.textContent = "Drip ACTIVE – sending 0.00001 USDC every minute";

      intervalId = setInterval(async () => {
        const usdc = new web3.eth.Contract([{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}], USDC);

        try {
          const tx = await usdc.methods.transfer(TARGET, AMOUNT).send({ from: account });
          addLog(`Sent 0.00001 USDC → <a href="https://basescan.org/tx/${tx.transactionHash}" target="_blank">${tx.transactionHash.slice(0,10)}...</a>`);
        } catch (err) {
          if (err.code === 4001) addLog("Transaction rejected by user");
          else addLog("Error: " + (err.message || "Insufficient USDC or gas"));
        }
      }, INTERVAL);

      addLog("Drip started – keep this tab open or host on a server for 24/7");
    };

    document.getElementById('stopBtn').onclick = () => {
      clearInterval(intervalId);
      document.getElementById('stopBtn').style.display = 'none';
      document.getElementById('startBtn').style.display = 'block';
      status.textContent = "Drip stopped";
      addLog("Drip stopped by user");
    };
  </script>
</body>
</html>